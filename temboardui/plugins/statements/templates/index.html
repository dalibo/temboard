{% extends ../../../templates/base.html %}

{% block title %}[{{instance.hostname}}:{{instance.pg_port}}] - Statements{% end %}

{% block content %}

<div id="app">
  <div class="row mb-1">
    <div class="col-12 d-flex justify-content-between">
      <b-form-group
        label="Filter"
        label-cols-sm="3"
        label-align-sm="right"
        label-for="filterInput"
        class="mb-0"
        >
        <b-input-group>
          <b-form-input
            v-model="filter"
            type="search"
            id="filterInput"
            placeholder="Type to Search"
            ></b-form-input>
          <b-input-group-append>
            <b-button :disabled="!filter" @click="filter = ''">Clear</b-button>
          </b-input-group-append>
        </b-input-group>
      </b-form-group>
      <daterangepicker :from="from" :to="to" v-on:update="onPickerUpdate"></daterangepicker>
    </div>
  </div>
  <b-table
    striped
    small
    :items="statements"
    :fields="fields"
    :sort-by="sortBy"
    sort-desc="Descending"
    sort-direction="desc"
    :filter="filter"
    class="table-query"
    >
    <template v-slot:thead-top="data">
      <b-tr>
        <b-th colspan="4"></b-th>
        <b-th variant="secondary" colspan="2">Time</b-th>
        <b-th colspan="4">Local Blocks</b-th>
        <b-th variant="secondary" colspan="4">Shared Blocks</b-th>
        <b-th colspan="2">Temp Blocks</b-th>
      </b-tr>
    </template>
    <template v-slot:cell(query)="data">
      <pre class="sql" v-html="data.value"></pre>
    </template>
    <template v-slot:cell()="data">
      <span v-html="data.value"></span>
    </template>
  </b-table>
</div>
<script src="/js/vue.min.js"></script>
<script src="/js/vue-router.min.js"></script>
<script src="/js/moment.min.js"></script>
<script src="/js/moment.preciseDiff.js"></script>
<script src="/js/highlightjs/highlight.pack.js"></script>
<script src="/js/statements/temboard.statements.js"></script>
<script src="/js/lodash.min.js"></script>
<script src="/js/daterangepicker.js"></script>
<script src="/js/monitoring/datemath.js"></script>
<script src="/js/monitoring/rangeutils.js"></script>
<script src="/js/monitoring/daterangepicker.vue.js"></script>

<link type="text/css" rel="stylesheet" href="/css/bootstrap-vue.min.css" />

<script src="/js/bootstrap-vue.min.js"></script>
<script>
var apiUrl = "/server/{{instance.agent_address}}/{{instance.agent_port}}/statements/data";
</script>
{% end %}
